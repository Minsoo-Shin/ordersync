# Mosquitto MQTT Broker 설정

# 포트 설정
listener 1883
protocol mqtt

# WebSocket 리스너
listener 9001
protocol websockets

# 로그 설정
log_dest file /mosquitto/log/mosquitto.log
log_type all

# 지속성 설정
persistence true
persistence_location /mosquitto/data/

# 연결 설정
allow_anonymous true

# 최대 연결 수
max_connections -1

# 메시지 크기 제한 (10MB)
message_size_limit 10485760

# 클라이언트 ID 설정 허용
allow_zero_length_clientid true

# QoS 설정
max_inflight_messages 20
max_queued_messages 1000

